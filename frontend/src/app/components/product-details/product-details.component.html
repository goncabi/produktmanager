<div class="product-details">
  <h2>Produktdetails</h2>

  <button mat-button color="primary" (click)="editMode = !editMode">
    {{ editMode ? 'Speichern' : 'Bearbeiten' }}
  </button>
  <button mat-button color="warn" *ngIf="editMode" (click)="cancelEdit()">Abbrechen</button>

  <table>
    <tr>
      <td><strong>EAN:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.ean_gtin || 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.ean_gtin">
      </td>
    </tr>
    <tr>
      <td><strong>Kategorie:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.category?.name || 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="editCategoryName">
      </td>
    </tr>
    <tr>
      <td><strong>Produktname:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.name || 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.name">
      </td>
    </tr>
    <tr>
      <td><strong>Bild:</strong></td>
      <td>
        <img *ngIf="!editMode && product?.image_url" [src]="product.image_url" alt="{{ product?.name }}" width="50">
        <input *ngIf="editMode" [(ngModel)]="product.image_url">
      </td>
    </tr>
    <tr>
      <td><strong>SKU/PLU:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.sku_plu || 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.sku_plu">
      </td>
    </tr>
    <tr>
      <td><strong>Beschreibung:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.description || 'Keine' }}</span>
        <textarea *ngIf="editMode" [(ngModel)]="product.description"></textarea>
      </td>
    </tr>
    <tr>
      <td><strong>Preis (Lieferung):</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.price_delivery | currency }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.price_delivery" type="number">
      </td>
    </tr>
    <tr>
      <td><strong>Preis (Abholung):</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.price_pickup | currency }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.price_pickup" type="number">
      </td>
    </tr>
    <tr>
      <td><strong>Gewicht/Volumen:</strong></td>
      <td>
        <span *ngIf="!editMode">
          {{ product?.net_volume_l != null ? product.net_volume_l + ' L' :
          (product?.net_weight_g != null ? product.net_weight_g + ' g' : 'Keine') }}
        </span>
        <input *ngIf="editMode" [(ngModel)]="product.net_weight_g" type="number" placeholder="Gewicht in g">
        <input *ngIf="editMode" [(ngModel)]="product.net_volume_l" type="number" placeholder="Volumen in L">
      </td>
    </tr>
    <tr>
      <td><strong>Alkoholgehalt:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.alcohol_volume != null ? product.alcohol_volume + ' %' : 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.alcohol_volume" type="number" step="0.1">
      </td>
    </tr>
    <tr>
      <td><strong>Koffeingehalt:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.caffeine_mg != null ? product.caffeine_mg + ' mg' : 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.caffeine_mg" type="number">
      </td>
    </tr>
    <tr>
      <td><strong>Pfandbetrag:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ product?.deposit_amount != null ? product.deposit_amount + ' €' : 'Keine' }}</span>
        <input *ngIf="editMode" [(ngModel)]="product.deposit_amount" type="number" step="0.01">
      </td>
    </tr>
    <tr>
    <tr>
      <td><strong>Zutaten:</strong></td>
      <td>{{ product.ingredientNames }}</td>
    </tr>
    <tr>
      <td><strong>Nährwerte:</strong></td>
      <td>
        Energie: {{ product.nutritionInfo?.energy_kcal }} kcal,
        Eiweiß: {{ product.nutritionInfo?.protein_g }} g,
        Fett: {{ product.nutritionInfo?.fat_g }} g,
        Zucker: {{ product.nutritionInfo?.sugar_g }} g
      </td>
    </tr>
    <tr>
      <td><strong>Nährwerte:</strong></td>
      <td>
        Energie: {{ nutritionInfo?.energy_kcal ?? 'N/A' }} kcal,
        Eiweiß: {{ nutritionInfo?.protein_g ?? 'N/A' }} g,
        Fett: {{ nutritionInfo?.fat_g ?? 'N/A' }} g,
        Zucker: {{ nutritionInfo?.sugar_g ?? 'N/A' }} g
      </td>
    </tr>
    <tr>
      <td><strong>Hersteller:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ manufacturerName }}</span>
        <input *ngIf="editMode" [(ngModel)]="editManufacturerName">
      </td>
    </tr>
    <tr>
      <td><strong>Adresse:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ manufacturerAddress }}</span>
        <input *ngIf="editMode" [(ngModel)]="editManufacturerAddress">
      </td>
    </tr>
    <tr>
      <td><strong>Land:</strong></td>
      <td>
        <span *ngIf="!editMode">{{ manufacturerCountry }}</span>
        <input *ngIf="editMode" [(ngModel)]="editManufacturerCountry">
      </td>
    </tr>
  </table>
</div>
